<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chess Elo Guesser (CEG)</title>
    <link rel="icon" href="favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="https://unpkg.com/chessground@8.4.0/assets/chessground.base.css"/>
    <link rel="stylesheet" href="https://unpkg.com/chessground@8.4.0/assets/chessground.cburnett.css"/>
    <link rel="stylesheet" href="https://unpkg.com/chessground@8.4.0/assets/chessground.brown.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="index.css">
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.0/dist/cyborg/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div class="container mt-4 text-center">
    <h3>Chess Elo Guesser (CEG)</h3><br>

    <div class="mt-0">
        <div class="input-group mb-3">
            <label for="pgn"></label><textarea maxlength="20000" type="text" id="pgn" class="form-control" name="pgn"
                                               placeholder="Enter PGN" rows="1"></textarea>
            <button class="btn btn-primary" id="pgn-button">GO</button>
        </div>
        <div class="my-3 fw-bold text-muted">OR</div>
        <div class="input-group mb-0">
            <label for="link"></label><input maxlength="20000" type="text" class="form-control" name="link" id="link"
                                             placeholder="Enter Lichess Link (e.g. https://lichess.org/gameid123/white)">
            <button class="btn btn-primary" id="link-button">GO</button>
        </div>

    </div>
    <hr>
    <div id="status" class="alert alert-primary" style="display: none"></div>
    <div class="collapse" id="collapse-container">
        <div id="box">
            <div id="board-container" tabindex="0">
                <div id="board" tabindex="0"></div>
                <div style="display: flex; justify-content: space-between; align-items: flex-end;">
                    <span class="mt-3" id="move-counter">hi</span>
                    <div style="padding: 0; margin: 0; width: 70%; display: flex; justify-content: flex-end; gap: 5px;">
                        <a href="" target="_blank" rel="noopener" class="btn btn-primary board-btn"
                           id="export">Export</a>
                        <button type="button" class="btn btn-primary board-btn" id="flip-btn">
                            <i class="bi bi-arrow-repeat"></i>
                        </button>
                        <button type="button" class="btn btn-primary board-btn" id="end-btn">
                            <i class="bi bi-arrow-up"></i>
                        </button>
                        <button type="button" class="btn btn-primary board-btn" id="start-btn">
                            <i class="bi bi-arrow-down"></i>
                        </button>
                        <button type="button" class="btn btn-primary board-btn" id="prev-btn">
                            <i class="bi bi-arrow-left"></i>
                        </button>
                        <button type="button" class="btn btn-primary board-btn" id="next-btn">
                            <i class="bi bi-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div id="charts">
                <canvas id="white-chart"></canvas>
                <br>
                <canvas id="black-chart"></canvas>
            </div>

        </div>
        <hr>
    </div>

    <div style="text-align: start">
        <h5>About this project:</h5>
        <p class="ms-2">
            This is an interface to talk to a chess AI bot that analyzes a chess game at each turn and returns a
            prediction
            of both players' elo. Please have fun comparing how well you think you performed compared to what the model
            thinks!
            I have been working on this project on my own since June 2025.
        </p>
        <h5>How to use:</h5>
        <ol>
            <li>Paste a valid PGN or Lichess game URL in the input fields above (preferably Blitz).</li>
            <li>Press GO and wait for the server to respond.</li>
            <li>Use the buttons below the board to navigate through the moves, flip the board, or export the prediction
                data.
            </li>
            <li>The model's prediction is based solely on the current
                game; it's not influenced by the players' ratings from external sources.
            </li>
        </ol>
        <p class="ms-2">
            <strong>To avoid overlap with training data:</strong>
            All training data came from the <a href="https://database.lichess.org/" target="_blank"
                                               rel="noopener noreferrer">Lichess public database</a>
            between July 2024 and July 2025. To avoid potential overlap with
            the training data, please avoid
            using games played during that period.
            <br>
            <br>
        </p>
        <h5>What do the outputs mean?:</h5>
        <p class="ms-2">
            <strong>Elo Confidence Charts:</strong><br>
            The charts display the model’s confidence in its rating predictions for each player up to the current move.
            For example, if the bar for 1500 is at 0.12, it means the model is 12% confident that the player's rating
            falls
            between 1500 and 1600.
            In practice, the model’s confidence in any specific range rarely exceeds 20%.
        </p>
        <p class="ms-2">
            <strong>Point Estimate:</strong><br>
            Simply put, it is the model's best prediction of the player's skill up to that move.</p>
        <p class="ms-2">
        </p>
        <hr>
        <h5>For more information: </h5>
        <a href="https://github.com/gliucode/chess-elo-guesser" target="_blank" class="btn btn-dark"
           rel="noopener noreferrer"
           style="background-color: #a3a3a3">
            <i class="fab fa-github me-2"></i> View on GitHub
        </a>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"
        integrity="sha512-xRllwz2gdZciIB+AkEbeq+gVhX8VB8XsfqeFbUh+SzHlN96dEduwtTuVuc2u9EROlmW9+yhRlxjif66ORpsgVA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script type="module" src="index.js"></script>
<script>
    const textarea = document.getElementById('pgn');

    function autoResize() {
        textarea.style.height = 'auto';
        textarea.style.height = textarea.scrollHeight + 'px';
    }

    textarea.addEventListener('input', autoResize);
    autoResize();
</script>

</body>

</html>